{% extends 'base.html.twig' %}

{% block title %}
    Partie en cours
{% endblock %}

{% block body %}
    <span>N° partie : </span>
    <span>{{ partie.Id }}, {{ partie.PartieNom }}, Commencée le : {{ partie.PartieDate|date("d/m/Y") }}</span><br>

    <span>Manche n°</span>
    <span>{{ partie.PartieManche }} </span><br>

    <span>Tour n°</span>
    <span>{{ partie.PartieTour }} </span><br>

    <span>Joueurs :</span>
    <span>J1 : {{ partie.Joueur1.Username }} VS J2 : {{ partie.Joueur2.Username }} </span><br>

    <span>Score joueur 1:</span>
    <span>{{ partie.ScoreJ1 }} </span><br>

    <span>Score joueur 2:</span>
    <span>{{ partie.ScoreJ2 }} </span><br>


    <span>Cartes joueur adverse : </span>
    {% if app.user.id == partie.Joueur1.Id %}
        {% for carte in partie.MainJ1 |sort %}
            <img style="width: 50px" src="{{ asset('assets/img/carte_dos.png') }}">
        {% endfor %}
    {% elseif app.user.id == partie.Joueur2.Id %}
        {% for carte in partie.MainJ2 |sort %}
            <img style="width: 50px" src="{{ asset('assets/img/carte_dos.png') }}">
        {% endfor %}
    {% endif %}
    <br>


    <span>Carte jetée</span>
    <img style="width: 50px" src="{{ asset('assets/img/carte_dos.png') }}">
    <br>

    <span>Pioche : </span>
    {% set piocheCounter=0 %}
    {% for cartes in partie.PartiePioche %}
        {% set piocheCounter = ( counter | default(0) ) + 1 %}
    {% endfor %}
    <span>{{ piocheCounter | last }}</span>
    <img style="width: 50px" src="{{ asset('assets/img/carte_dos.png')}}">
    <br>

    <span>Cartes objectifs : </span>
    {% for objectif in objectifs %}
        <img style="width: 50px" src="{{ asset('assets/img/' ~ objectif.ObjectifImg) }}">
    {% endfor %}
    <br>

    <span>Marqueurs objets : </span>
    {% for marqueur in partie.TerrainJ1 %}
        {% set counter = ( counter | default(0) ) + 1 %}
        {% if marqueur==0 %}
            <img style="width: 20px" src="{{ asset('assets/img/pion.png') }}">
            <span>{{ counter }} : Milieu.</span>
        {% elseif marqueur==1 %}
            <span>Objectif {{ counter }} : Joueur 1.</span>
        {% elseif marqueur==2 %}
            <span>Objectif {{ counter }} : Joeur 2.</span>
        {% endif %}
    {% endfor %}
    <br>


    <span>Actions Joueur 1 : </span>
    {% for action in partie.ActionJ1 %}
        {% set counter = ( counter | default(0) ) + 1 %}
        {% if counter == 1 %}
            {% if action==0 %}
                <img style="width: 50px" src="{{ asset('assets/img/action1.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action1_fini.png') }}">
            {% endif %}
        {% elseif counter == 2 %}
            {% if action==0 %}
                <img style="width: 50px" src="{{ asset('assets/img/action2.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action2_fini.png') }}">
            {% endif %}
        {% elseif counter == 3 %}
            {% if action==0 %}
                <img style="width: 50px" src="{{ asset('assets/img/action3.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action3_fini.png') }}">
            {% endif %}
        {% elseif counter == 4 %}
            {% if action==0%}
                <img style="width: 50px" src="{{ asset('assets/img/action1.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action1_fini.png') }}">
            {% endif %}
        {% endif %}
    {% endfor %}
    <br>

    <span>Actions Joueur 2 : </span>
    {% for action in partie.ActionJ2 %}
        {% set counter = ( counter | default(0) ) + 1 %}
        {% if counter == 1 %}
            {% if action==0 %}
                <img style="width: 50px" src="{{ asset('assets/img/action1.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action1_fini.png') }}">
            {% endif %}
        {% elseif counter == 2 %}
            {% if action==0 %}
                <img style="width: 50px" src="{{ asset('assets/img/action2.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action2_fini.png') }}">
            {% endif %}
        {% elseif counter == 3 %}
            {% if action==0 %}
                <img style="width: 50px" src="{{ asset('assets/img/action3.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action3_fini.png') }}">
            {% endif %}
        {% elseif counter == 4 %}
            {% if action==0%}
                <img style="width: 50px" src="{{ asset('assets/img/action1.png') }}">
            {% elseif action==1 %}
                <img style="width: 50px" src="{{ asset('assets/img/action1_fini.png') }}">
            {% endif %}
        {% endif %}
    {% endfor %}
    <br>



    <span>Cartes en main </span>
    {% if app.user.id == partie.Joueur1.Id %}
        {% for carte in partie.MainJ1 |sort %}
            <img style="width: 50px" src="{{ asset('assets/img/' ~ Objets[carte].CarteImg) }}">
        {% endfor %}
    {% elseif app.user.id == partie.Joueur2.Id %}
        {% for carte in partie.MainJ2 |sort %}
            <img style="width: 50px" src="{{ asset('assets/img/' ~ Objets[carte].CarteImg) }}">
        {% endfor %}
    {% endif %}

    <br>



{% endblock %}